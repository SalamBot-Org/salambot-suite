# SalamBot Suite ü§ñ

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![GitHub issues](https://img.shields.io/github/issues/SalamBot-Org/salambot-suite)](https://github.com/SalamBot-Org/salambot-suite/issues)
[![GitHub forks](https://img.shields.io/github/forks/SalamBot-Org/salambot-suite)](https://github.com/SalamBot-Org/salambot-suite/network)
[![GitHub stars](https://img.shields.io/github/stars/SalamBot-Org/salambot-suite)](https://github.com/SalamBot-Org/salambot-suite/stargazers)
[![CI Status](https://github.com/SalamBot-Org/salambot-suite/actions/workflows/ci.yml/badge.svg)](https://github.com/SalamBot-Org/salambot-suite/actions/workflows/ci.yml)
[![Security](https://img.shields.io/badge/Security-Automated-green.svg)](https://github.com/SalamBot-Org/salambot-suite/security)
[![Dependabot](https://img.shields.io/badge/Dependabot-Enabled-blue.svg)](https://github.com/SalamBot-Org/salambot-suite/network/dependencies)

## Pr√©sentation

SalamBot est une solution CRM (Customer Relationship Management) intelligente con√ßue sp√©cifiquement pour les besoins des Petites et Moyennes Entreprises (PME) au Maroc. Notre objectif est de fournir aux entreprises marocaines des outils puissants et accessibles pour g√©rer leurs interactions clients, automatiser les t√¢ches r√©p√©titives et am√©liorer leur efficacit√© commerciale gr√¢ce √† l'intelligence artificielle.

SalamBot int√®gre des fonctionnalit√©s avanc√©es de traitement du langage naturel (NLP) pour comprendre et interagir avec les clients en **Fran√ßais**, **Arabe Classique** et **Darija Marocaine**, offrant ainsi une exp√©rience client personnalis√©e et culturellement adapt√©e.

### Vision

Devenir la plateforme CRM de r√©f√©rence pour les PME au Maroc, en d√©mocratisant l'acc√®s √† l'IA pour am√©liorer la relation client et stimuler la croissance des entreprises locales.

### Objectifs Cl√©s

*   **Gestion centralis√©e des clients :** Offrir une vue √† 360 degr√©s des interactions clients.
*   **Automatisation Intelligente :** Automatiser les r√©ponses aux questions fr√©quentes, la qualification des leads et le suivi client via des agents conversationnels.
*   **Support Multilingue :** Communiquer efficacement en Fran√ßais, Arabe et Darija.
*   **Int√©gration Facile :** Se connecter aux canaux de communication populaires (WhatsApp, Web, etc.).
*   **Analyse et Reporting :** Fournir des insights exploitables sur les performances commerciales et la satisfaction client.

## Stack Technique Principale

SalamBot est construit sur une architecture moderne et √©volutive utilisant les technologies suivantes :

*   **Frontend (Agent Desk & Widget Web) :** React, TypeScript, Next.js, Tailwind CSS
*   **Backend & AI Flows :** Node.js, TypeScript, Genkit (pour l'orchestration AI), Google Gemini, Llama (via API ou local)
*   **Infrastructure :** Google Cloud Platform (Cloud Functions, Vertex AI), Vercel (pour le d√©ploiement frontend)
*   **Base de donn√©es :** Firestore / PostgreSQL (√† d√©finir selon les besoins)
*   **Monorepo Management :** Nx, pnpm

## Roadmap Projet (Phases)

*   **Phase 1 (Termin√©e - v0.2.0) :**
    *   Mise en place des flows Genkit pour la d√©tection de langue (FR/AR/Darija) et la g√©n√©ration de r√©ponses basiques.
    *   D√©veloppement d'un widget web v0.1 avec API mock pour la simulation.
    *   Configuration initiale CI/CD.
*   **Phase 2 (En cours) :**
    *   D√©veloppement du socle de l'Agent Desk (interface op√©rateur).
    *   Mise en place d'une gateway WebSocket pour la communication temps r√©el.
    *   Cr√©ation d'un connecteur WhatsApp Business API.
    *   D√©veloppement d'une librairie d'orchestration pour g√©rer les conversations multi-tours.
*   **Phase 3 (√Ä venir) :**
    *   Int√©gration CRM (gestion contacts, historique).
    *   Fonctionnalit√©s avanc√©es de l'Agent Desk (transfert, escalade).
    *   Am√©lioration des capacit√©s NLU (reconnaissance d'intention, extraction d'entit√©s).
    *   Tableaux de bord et reporting.
*   **Phase 4 (Vision Long Terme) :**
    *   Connecteurs additionnels (Email, SMS, r√©seaux sociaux).
    *   Fonctionnalit√©s proactives (campagnes marketing cibl√©es).
    *   Personnalisation avanc√©e et marketplace d'extensions.

## Infrastructure

SalamBot utilise une infrastructure cloud moderne bas√©e sur Google Cloud Platform avec Terraform pour la gestion de l'infrastructure as code.

### Redis Cache Manag√©

Le projet utilise Google Cloud Memorystore pour Redis comme solution de cache distribu√©e et de stockage de sessions.

#### Commandes Infrastructure Redis

*   **Initialiser Terraform :**
    ```bash
    pnpm infra:redis:init
    ```

*   **Planifier les changements d'infrastructure :**
    ```bash
    pnpm infra:redis:plan
    ```

*   **Appliquer l'infrastructure Redis :**
    ```bash
    pnpm infra:redis:apply
    ```

*   **D√©truire l'infrastructure Redis :**
    ```bash
    pnpm infra:redis:destroy
    ```

*   **Mettre √† jour la configuration Firestore avec l'URL Redis :**
    ```bash
    pnpm infra:update-config
    ```

#### Configuration

L'infrastructure Redis est configur√©e via les fichiers Terraform dans `infra/terraform/`. Les variables d'environnement sont g√©r√©es via la librairie `libs/config` qui expose :

*   `getRedisClient()` - Client Redis configur√© automatiquement
*   `getEnvConfig()` - Variables d'environnement valid√©es
*   `getRuntimeConfig()` - Configuration runtime depuis Firestore

#### Monitoring

L'infrastructure inclut :
*   Monitoring automatique via Google Cloud Operations
*   M√©triques Prometheus export√©es par d√©faut
*   Alertes Grafana configurables
*   Health checks automatiques
*   Int√©gration Grafana Cloud pour les tableaux de bord avanc√©s
*   Export de m√©triques avec `prometheus_target_tag` pour Grafana Cloud

#### S√©curit√© & Maintenance

*   **Rotation Automatique des Mots de Passe :** Rotation mensuelle automatis√©e des mots de passe Redis via GitHub Actions
*   **Gestion des Secrets :** Int√©gration avec Google Secret Manager pour le stockage s√©curis√© des identifiants
*   **Audit Trail :** Journalisation compl√®te et versioning de toutes les op√©rations de s√©curit√©
*   **Support Multi-Environnements :** Workflows de rotation s√©par√©s pour dev, staging et production

Pour des informations d√©taill√©es sur la rotation des mots de passe Redis, voir [`docs/redis-password-rotation.md`](docs/redis-password-rotation.md).

## üîí S√©curit√© et Qualit√©

SalamBot Suite impl√©mente des pratiques de s√©curit√© robustes et une approche DevSecOps compl√®te :

### Gestion Automatis√©e des Vuln√©rabilit√©s

- **üîç Audit Continu** : V√©rification automatique des vuln√©rabilit√©s √† chaque commit
- **ü§ñ Dependabot** : Mises √† jour automatiques des d√©pendances de s√©curit√©
- **‚ö° Correction Rapide** : Pipeline CI/CD qui √©choue en cas de vuln√©rabilit√©s mod√©r√©es+
- **üìã Documentation** : Proc√©dures standardis√©es dans [`docs/security-vulnerability-management.md`](docs/security-vulnerability-management.md)

### Surveillance de S√©curit√©

```bash
# Audit de s√©curit√© local
pnpm audit

# Correction automatique des vuln√©rabilit√©s
pnpm audit --fix

# V√©rification des d√©pendances obsol√®tes
pnpm outdated
```

### Qualit√© du Code

- **‚úÖ Tests Automatis√©s** : Couverture compl√®te avec Jest et Testing Library
- **üéØ Linting Strict** : ESLint + TypeScript pour la qualit√© du code
- **üîÑ CI/CD Robuste** : 4 jobs parall√®les (lint, test, build, security)
- **üìä Monitoring** : Nx Cloud pour l'optimisation des builds

### Conformit√© et Bonnes Pratiques

- **üîê Secrets Management** : Google Secret Manager pour les donn√©es sensibles
- **üèóÔ∏è Infrastructure as Code** : Terraform pour la reproductibilit√©
- **üìù Audit Trail** : Journalisation compl√®te des op√©rations critiques
- **üîÑ Rotation Automatique** : Mots de passe et cl√©s API renouvel√©s r√©guli√®rement

## üöÄ Commandes de D√©veloppement

Ce projet utilise `pnpm` comme gestionnaire de paquets et `Nx` pour la gestion du monorepo.

### D√©veloppement Local

```bash
# Installation des d√©pendances
pnpm install

# Lancer tous les tests
pnpm test

# Lancer le linting
pnpm lint

# Builder pour la production
pnpm build

# Lancer une application en d√©veloppement
pnpm nx serve agent-desk
pnpm nx serve widget-web
```

### Commandes Nx Avanc√©es

```bash
# Tests pour un projet sp√©cifique
pnpm nx test widget-web

# Linting pour un projet sp√©cifique
pnpm nx lint functions-run

# Build avec configuration sp√©cifique
pnpm nx build widget-web --configuration=production

# Ex√©cuter une cible sur tous les projets affect√©s
pnpm nx affected --target=test

# Visualiser le graphe des d√©pendances
pnpm nx graph
```

### Infrastructure et S√©curit√©

```bash
# Infrastructure Redis
pnpm infra:redis:init      # Initialiser Terraform
pnpm infra:redis:plan      # Planifier les changements
pnpm infra:redis:apply     # Appliquer l'infrastructure
pnpm infra:redis:destroy   # D√©truire l'infrastructure

# Configuration et maintenance
pnpm infra:update-config           # Mettre √† jour la config Firestore
pnpm infra:validate                # Valider la configuration Terraform
pnpm infra:rotate-redis-password   # Rotation manuelle du mot de passe Redis

# S√©curit√©
pnpm audit                 # Audit des vuln√©rabilit√©s
pnpm audit --fix          # Correction automatique
pnpm outdated             # V√©rifier les d√©pendances obsol√®tes
```

## üìÅ Structure du Projet

```
salambot-suite/
‚îú‚îÄ‚îÄ apps/                          # Applications principales
‚îÇ   ‚îú‚îÄ‚îÄ agent-desk/               # Interface op√©rateur (React + Next.js)
‚îÇ   ‚îú‚îÄ‚îÄ functions-run/            # Cloud Functions (Node.js + TypeScript)
‚îÇ   ‚îî‚îÄ‚îÄ widget-web/               # Widget client (React + Next.js)
‚îú‚îÄ‚îÄ libs/                          # Biblioth√®ques partag√©es
‚îÇ   ‚îú‚îÄ‚îÄ ai/lang-detect/           # D√©tection de langue (FR/AR/Darija)
‚îÇ   ‚îú‚îÄ‚îÄ auth/                     # Authentification et autorisation
‚îÇ   ‚îú‚îÄ‚îÄ config/                   # Configuration centralis√©e
‚îÇ   ‚îî‚îÄ‚îÄ ui/                       # Composants UI r√©utilisables
‚îú‚îÄ‚îÄ infra/                         # Infrastructure as Code
‚îÇ   ‚îî‚îÄ‚îÄ terraform/                # Configuration Terraform (Redis, GCP)
‚îú‚îÄ‚îÄ docs/                          # Documentation technique
‚îÇ   ‚îú‚îÄ‚îÄ security-vulnerability-management.md
‚îÇ   ‚îú‚îÄ‚îÄ redis-password-rotation.md
‚îÇ   ‚îî‚îÄ‚îÄ workload-identity-setup.md
‚îú‚îÄ‚îÄ scripts/                       # Scripts d'automatisation
‚îî‚îÄ‚îÄ .github/                       # Workflows CI/CD et Dependabot
```

## ü§ù Contribution

Les contributions sont les bienvenues ! Voici comment participer :

### Pr√©requis

- Node.js 22+
- pnpm 10+
- Acc√®s Google Cloud Platform (pour l'infrastructure)

### Processus de Contribution

1. **Fork** le repository
2. **Cr√©er** une branche feature (`git checkout -b feature/amazing-feature`)
3. **D√©velopper** en suivant les standards du projet
4. **Tester** : `pnpm test && pnpm lint`
5. **S√©curiser** : `pnpm audit` (z√©ro vuln√©rabilit√© requise)
6. **Committer** avec des messages conventionnels
7. **Pousser** vers votre branche
8. **Ouvrir** une Pull Request

### Standards de Qualit√©

- ‚úÖ Tests unitaires obligatoires
- ‚úÖ Couverture de code > 80%
- ‚úÖ Linting sans erreur
- ‚úÖ TypeScript strict
- ‚úÖ Documentation √† jour
- ‚úÖ S√©curit√© valid√©e

### Ressources Utiles

- [Architecture Documentation](docs/archi.md)
- [Security Guidelines](docs/security-vulnerability-management.md)
- [Infrastructure Setup](docs/workload-identity-setup.md)

## üìÑ Licence

Ce projet est sous licence MIT. Voir le fichier [LICENSE](LICENSE) pour plus de d√©tails.

---

**D√©velopp√© avec ‚ù§Ô∏è pour les PME marocaines par l'√©quipe SalamBot**

*Pour toute question ou support, contactez-nous √† : [info@salambot.ma](mailto:info@salambot.ma)*

