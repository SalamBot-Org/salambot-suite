# =============================================================================
# SalamBot API Gateway Enterprise - Configuration Environment
# =============================================================================

# -----------------------------------------------------------------------------
# SERVER CONFIGURATION
# -----------------------------------------------------------------------------
NODE_ENV=development
PORT=3000
HOST=0.0.0.0

# -----------------------------------------------------------------------------
# SECURITY & AUTHENTICATION
# -----------------------------------------------------------------------------
# JWT Secret pour l'authentification (OBLIGATOIRE en production)
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# API Keys pour l'authentification alternative
API_KEY_HEADER=X-API-Key
API_KEYS=salambot-api-key-1,salambot-api-key-2

# Encryption key pour les données sensibles
ENCRYPTION_KEY=your-32-character-encryption-key

# -----------------------------------------------------------------------------
# REDIS CONFIGURATION (Cache & Sessions)
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_KEY_PREFIX=salambot:gateway:
REDIS_TTL=3600

# -----------------------------------------------------------------------------
# MICROSERVICES ENDPOINTS
# -----------------------------------------------------------------------------
# Genkit AI Flows Service
GENKIT_SERVICE_URL=http://localhost:3001
GENKIT_SERVICE_TIMEOUT=30000
GENKIT_SERVICE_RETRIES=3

# REST API Service
REST_API_SERVICE_URL=http://localhost:3002
REST_API_SERVICE_TIMEOUT=15000
REST_API_SERVICE_RETRIES=2

# WebSocket Service
WEBSOCKET_SERVICE_URL=http://localhost:3003
WEBSOCKET_SERVICE_TIMEOUT=5000
WEBSOCKET_SERVICE_RETRIES=1

# -----------------------------------------------------------------------------
# RATE LIMITING
# -----------------------------------------------------------------------------
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false
RATE_LIMIT_SKIP_FAILED_REQUESTS=false

# Rate limiting par endpoint
RATE_LIMIT_AUTH_MAX=10
RATE_LIMIT_AI_MAX=20
RATE_LIMIT_API_MAX=50

# -----------------------------------------------------------------------------
# CORS CONFIGURATION
# -----------------------------------------------------------------------------
CORS_ORIGIN=http://localhost:3000,https://salambot.app,https://*.salambot.app
CORS_CREDENTIALS=true
CORS_METHODS=GET,HEAD,PUT,PATCH,POST,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-API-Key,X-Request-ID

# -----------------------------------------------------------------------------
# LOGGING CONFIGURATION
# -----------------------------------------------------------------------------
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_ENABLED=true
LOG_FILE_PATH=./logs/gateway.log
LOG_FILE_MAX_SIZE=10m
LOG_FILE_MAX_FILES=5

# Logging des requêtes sensibles
LOG_SENSITIVE_DATA=false
LOG_REQUEST_BODY=false
LOG_RESPONSE_BODY=false

# -----------------------------------------------------------------------------
# MONITORING & METRICS
# -----------------------------------------------------------------------------
METRICS_ENABLED=true
METRICS_PATH=/metrics
METRICS_COLLECT_DEFAULT=true
METRICS_PREFIX=salambot_gateway_

# Prometheus Push Gateway (optionnel)
PROMETHEUS_PUSH_GATEWAY_URL=
PROMETHEUS_PUSH_INTERVAL=10000

# -----------------------------------------------------------------------------
# HEALTH CHECKS
# -----------------------------------------------------------------------------
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_RETRIES=3

# -----------------------------------------------------------------------------
# CIRCUIT BREAKER
# -----------------------------------------------------------------------------
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_TEST_MODE=false
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_SUCCESS_THRESHOLD=3
CIRCUIT_BREAKER_TIMEOUT=60000
CIRCUIT_BREAKER_RESET_TIMEOUT=30000

# Test-specific Timeouts (used when CIRCUIT_BREAKER_TEST_MODE=true)
TEST_REQUEST_TIMEOUT=3000
TEST_CONNECTION_TIMEOUT=1000
TEST_RESPONSE_TIMEOUT=2000

# -----------------------------------------------------------------------------
# CACHE CONFIGURATION
# -----------------------------------------------------------------------------
CACHE_ENABLED=true
CACHE_TTL=300
CACHE_MAX_SIZE=1000
CACHE_COMPRESSION=true

# Cache par type de contenu
CACHE_STATIC_TTL=86400
CACHE_API_TTL=300
CACHE_AI_TTL=600

# -----------------------------------------------------------------------------
# DATABASE (si nécessaire pour l'authentification)
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://username:password@localhost:5432/salambot_gateway
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_TIMEOUT=30000

# -----------------------------------------------------------------------------
# EXTERNAL SERVICES
# -----------------------------------------------------------------------------
# Service de notification (Slack, Discord, etc.)
NOTIFICATION_WEBHOOK_URL=
NOTIFICATION_ENABLED=false

# Service de monitoring externe (DataDog, New Relic, etc.)
MONITORING_API_KEY=
MONITORING_ENABLED=false

# -----------------------------------------------------------------------------
# DEVELOPMENT & DEBUG
# -----------------------------------------------------------------------------
DEBUG=salambot:*
DEBUG_REQUESTS=false
DEBUG_RESPONSES=false
DEBUG_PERFORMANCE=false

# Hot reload en développement
HOT_RELOAD=true
WATCH_FILES=true

# -----------------------------------------------------------------------------
# PRODUCTION OPTIMIZATIONS
# -----------------------------------------------------------------------------
# Compression
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=6
COMPRESSION_THRESHOLD=1024

# Keep-alive
KEEP_ALIVE_TIMEOUT=5000
HEADERS_TIMEOUT=60000

# Clustering
CLUSTER_ENABLED=false
CLUSTER_WORKERS=0

# -----------------------------------------------------------------------------
# SECURITY HEADERS
# -----------------------------------------------------------------------------
SECURITY_HEADERS_ENABLED=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true

# Content Security Policy
CSP_ENABLED=true
CSP_DIRECTIVES="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'"

# -----------------------------------------------------------------------------
# FEATURE FLAGS
# -----------------------------------------------------------------------------
FEATURE_WEBSOCKET_PROXY=true
FEATURE_AI_FLOWS=true
FEATURE_METRICS_DASHBOARD=true
FEATURE_ADMIN_PANEL=false
FEATURE_RATE_LIMITING=true
FEATURE_CIRCUIT_BREAKER=true
FEATURE_CACHING=true